<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sheet æ¬„ä½æ¸¬è©¦</title>
</head>
<body>
    <h1>ğŸ“Š Sheet æ¬„ä½å°æ‡‰æ¸¬è©¦</h1>
    
    <div id="results"></div>
    
    <button onclick="testWithCorrectFields()">æ¸¬è©¦æ­£ç¢ºæ¬„ä½æ ¼å¼</button>
    
    <script>
        async function testWithCorrectFields() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>æ¸¬è©¦ä¸­...</p>';
            
            try {
                // å…ˆç™»å…¥
                await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: 'Woody' })
                });
                
                // ä½¿ç”¨èˆ‡ Sheet æ¬„ä½å®Œå…¨å°æ‡‰çš„æ ¼å¼
                const response = await fetch('/api/visitors', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        name: 'Sheet Test User',
                        phone: '0912345678',
                        email: 'test@example.com',
                        howDidYouHear: 'friend_family',
                        howDidYouHearOther: '',
                        isFirstVisit: 'yes',
                        wantsContact: 'no',
                        prayerRequest: 'Test prayer request'
                    }),
                    credentials: 'include'
                });
                
                const data = await response.text();
                
                results.innerHTML = `
                    <h3>æ¸¬è©¦çµæœ</h3>
                    <p><strong>ç‹€æ…‹:</strong> ${response.status}</p>
                    <p><strong>å›æ‡‰:</strong></p>
                    <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">${data}</pre>
                `;
                
                if (response.status === 500) {
                    results.innerHTML += `
                        <div style="background: #ffe6e6; padding: 15px; border-radius: 5px; margin-top: 10px;">
                            <h4>ğŸš¨ ä»ç„¶æ˜¯ 404 éŒ¯èª¤ï¼Ÿè«‹æª¢æŸ¥ï¼š</h4>
                            <ol>
                                <li><strong>SheetDB URL æ ¼å¼ï¼š</strong><br>
                                    æ‡‰è©²æ˜¯ï¼š<code>https://sheetdb.io/api/v1/YOUR_SHEET_ID</code>
                                </li>
                                <li><strong>Google Sheet æ¬Šé™ï¼š</strong><br>
                                    ç¢ºä¿è¨­å®šç‚ºã€ŒçŸ¥é“é€£çµçš„ä»»ä½•äººéƒ½å¯ä»¥æª¢è¦–ã€
                                </li>
                                <li><strong>æ‰‹å‹•æ¸¬è©¦ï¼š</strong><br>
                                    åœ¨ç€è¦½å™¨ä¸­ç›´æ¥è¨ªå•æ‚¨çš„ SheetDB URL
                                </li>
                            </ol>
                        </div>
                    `;
                }
                
            } catch (error) {
                results.innerHTML = `<p style="color: red;">éŒ¯èª¤: ${error.message}</p>`;
            }
        }
    </script>
    
    <hr>
    <h2>ğŸ“‹ æ‚¨çš„ Sheet æ¬„ä½</h2>
    <p>âœ… æ‚¨çš„ Google Sheet æ¬„ä½æ¨™é¡Œæ­£ç¢ºï¼š</p>
    <pre style="background: #e8f5e8; padding: 10px; border-radius: 5px;">
id | name | phone | email | howDidYouHear | howDidYouHearOther | isFirstVisit | wantsContact | prayerRequest
    </pre>
    
    <h3>ğŸ”§ ä¸‹ä¸€æ­¥æª¢æŸ¥</h3>
    <ol>
        <li><strong>ç¢ºèª SheetDB URLï¼š</strong> åœ¨ Cloudflare Pages ç’°å¢ƒè®Šæ•¸ä¸­æª¢æŸ¥æ ¼å¼</li>
        <li><strong>æ¸¬è©¦ URLï¼š</strong> åœ¨ç€è¦½å™¨ä¸­ç›´æ¥è¨ªå•æ‚¨çš„ SheetDB URL</li>
        <li><strong>æª¢æŸ¥æ¬Šé™ï¼š</strong> ç¢ºä¿ Google Sheet æ˜¯å…¬é–‹å¯è®€å–çš„</li>
    </ol>
</body>
</html>